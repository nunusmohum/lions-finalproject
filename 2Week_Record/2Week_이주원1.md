# Title: [1Week] 이주원1

## 미션 요구사항 분석 & 체크리스트

- [`2주차 미션`](https://likelion.notion.site/2-5fc7faa7e4434510b4fed43119404441)의 요구사항과 관련 있어보이는 [`미션 개요`](https://likelion.notion.site/fbd36890b3b242708d463bf59350e61b)의 요구사항도 함께 반영하도록 하였다.
  - 본인이 작성한 글을 장바구니에 담은 경우에는 error 처리가 되어야 합니다.
  - 같은 도서를 장바구니에 2개 이상 담을 수 없습니다.
  - 결제 이후 도서를 읽을 수 있습니다.

### 필수과제
- [X] 주문
- [X] 결제
- [X] 장바구니
- [X] PG연동

### 추가과제
- [X] 환불

---

## 2주차 미션 요약

**[접근 방법]**
- 기존 강사님의 1주차 코드와 스프링 부트 실습 강의를 많이 참고하여 기능을 완성하는데 집중하였다.

- 구현 난이도 및 연관 관계를 고려하여 `장바구니` > `주문` > `결제` + `PG연동` > `환불` 순으로 구현하였다.

- 테스트 코드를 작성하여 복잡한 주문, 결제 과정에 대한 오류를 검증해보도록 시도하였다.


**[특이사항]**
- `[아쉬웠던 점]` 테스트 코드를 작성해보니 controller 와 service 계층의 구분에 도움이 된다는 것을 느꼈다. service 테스트 코드를 작성하다보니 내가 service 에서 필요한 로직을 controller에 우겨 넣고 있었다는 것을 깨달았다.

- `[아쉬웠던 점]` 테스트 코드 작성 경험이 많이 없어서 어설프다. 애초에 테스트를 고려한 좋은 코드를 작성하지 않았다. 역으로 생각하면 좋은 코드란 것이 결국 테스트하기 좋은 코드고 테스트 하기 좋은 코드가 잘 설계된 코드라는 것을 느꼈다.

- `[아쉬웠던 점]` 이번엔 commit 별로 코드 수정 사항을 잘 분리하려 했으나 여전히 중간 중간에 다른 수정사항들을 건드느라 fix로 들어가야할 commit 들이 feat 기능 추가 커밋에 같이 들어갔다.

- `[Refactoring]` 요청에서 조작한 값을 결제 요청으로 보냈을 시에 이를 검증하는 코드를 작성해야 할 것 같다. 지금은 결제 관련 코드가 너무 복잡해서 차마 건들기가 쉽지 않다.

- `[Refactoring]` 두가지 버전의 코드를 참고하다 보니 응답 관련 코드가 제각각이다. 이를 Rq 클래스를 이용한 응답으로 통일하면 코드가 훨씬 깔끔해질것 같다.

- `[Refactoring]` 결제 success 관련 코드가 너무 길어져서 이를 따로 함수나 클래스로 분리해야한다.

**[피드백내용]**
- 이미 값이 있는 지에 대한 검증 코드는 전체 검색 하여 찾지 말고 select 하는 식으로 할 것

- GET 요청의 경우 csrf 공격에 취약하다는 것을 생각해둘 것.

- 테스트 코드를 간단한 로직부터 검증하는 식으로 하여도 된다. 복잡한 모든 로직을 검증해야 한다고 생각하지 않아도 된다.
